# Технічна архітектура: Розподілена повітряна пошуково-рятувальна система (DAS-SAR)

[Мови]: [EN](Technical%20Architecture.md) | [PL](Technical%20Architecture_PL.md) | [UA](Technical%20Architecture_UA.md)

## 1. Огляд системи
Система DAS-SAR використовує **Розподілену систему підйому (DLS)** для транспортування важких вантажів, таких як постраждалі люди, за допомогою рою координованих дронів. Ця архітектура відокремлює загальну вантажопідйомність від розміру окремих агентів, що дозволяє використовувати портативні дрони для виконання завдань з підйому важких вантажів.

## 2. Топологія рою

### 2.1 Фаза 1: Масштабований прототип
*   **Розмір флоту:** 4 одиниці (квадрокоптери).
*   **Мета:** Перевірка законів керування та кооперативної оцінки стану.

### 2.2 Фаза 2: Повномасштабний рій
*   **Розмір флоту:** 6 одиниць (коаксіальні октокоптери/X8) + 1 резервний агент.
*   **Платформа:** Спеціальні важкі рами, оптимізовані для розподіленого транспортування.
*   **Конфігурація:** Топологія "зірка" на прив'язі, де кожен агент підключений до вантажу через активну систему лебідок.

### 2.3 Фізика надмірності 6 агентів
Рій Фази 2 чітко визначений як мінімум з **6 агентів** для забезпечення **відмовостійкості** (fail-operational).
*   **Керування 6-DOF:** Вантаж на прив'язі потребує мінімум 6 лінійно незалежних векторів натягу для досягнення повної керованості його 6 ступенями свободи (3D трансляція та 3D ротація).
*   **Безпечна надмірність:** Використовуючи 6 агентів у геометричній конфігурації, яка уникає копланарності прив'язей, система зберігає повний контроль 6-DOF над вантажем. У разі відмови одного агента, інші агенти можуть перерозподілити свої вектори тяги. Хоча втрата одного агента зменшує загальну вантажопідйомність, "мінімум 6 агентів" гарантує, що рій не втратить здатність стабілізувати орієнтацію або положення вантажу, запобігаючи катастрофічним осциляціям або втраті контролю під час аварійних маневрів.

## 3. Розподілений розподіл керування (DCA)
Ядром інтелекту DAS-SAR є рівень **Розподіленого розподілу керування (DCA)**, який перетворює бажаний рух вантажу в уставки для окремих агентів.

### 3.1 Розрахунок вектора тяги
Контролер рою (що запускає алгоритм на основі консенсусу на модулях Jetson Orin) розраховує необхідний **Результуючий ключ (Wrench)** ($\mathbf{W}_{req}$), необхідний для переміщення вантажу вздовж його траєкторії:
$$\mathbf{W}_{req} = [F_x, F_y, F_z, \tau_x, \tau_y, \tau_z]^T$$

### 3.2 Логіка розподілу
Алгоритм DCA розподіляє цей ключ між $N$ активними агентами:
1.  **Оптимізація:** Він вирішує задачу обмеженого квадратичного програмування (QP) для пошуку оптимального натягу $T_i$ для кожної прив'язі.
2.  **Обмеження:**
    *   $T_{min} \leq T_i \leq T_{max}$ (Гарантує, що прив'язі ніколи не провисають, а двигуни залишаються в межах лімітів).
    *   Геометричні обмеження на основі поточних відносних положень дронів щодо вантажу.
3.  **Управління надмірністю:** Якщо агент повідомляє про збій або низький рівень заряду батареї, DCA миттєво перераховує матрицю розподілу для $N-1$ агентів, збільшуючи навантаження на одиниці, що залишилися, для підтримки необхідного $\mathbf{W}_{req}$.

## 4. Апаратні характеристики

### 4.1 Пропульсивна система Фази 2 (Рій "Макро")
Для обробки вантажу понад 100 кг з високим запасом міцності, Фаза 2 використовує промислові пропульсивні системи.
*   **Двигуни:** **T-Motor U15 II** або **Hobbywing XRotor X9 Plus**.
*   **Конфігурація:** Коаксіальна установка X8 для внутрішньої надмірності двигунів.
*   **Співвідношення тяги до ваги:** Цільове співвідношення 2:1 при номінальному навантаженні для забезпечення можливості відновлення під час відмови агента.

### 4.2 Активні лебідкові механізми
Кожен агент Фази 2 оснащений **активним лебідковим механізмом** для контролю довжини прив'язі.
*   **Динамічне демпфування:** Лебідка активно регулює довжину прив'язі для демпфування осциляцій вантажу та компенсації зміщень, спричинених поривами вітру.
*   **Змінна геометрія:** Дозволяє рою розширювати або звужувати свій радіус під час польоту для навігації через вузькі проходи (наприклад, між будівлями або деревами).
*   **Аварійне від'єднання:** Інтегрований високошвидкісний різак кабелю та сервопривід для негайного відокремлення агентів, що вийшли з ладу.

## 5. Програмний стек
*   **Проміжне ПЗ:** Eclipse Zenoh (Peer-to-Peer mesh мережа).
*   **Логіка керування:** Rust (критично важливі для безпеки польотні цикли).
*   **Автопілот:** PX4, що працює на Pixhawk 6C / Cube Orange.
*   **Оцінка стану:** Візуально-інерціальна одометрія (VIO), поєднана з RTK-GNSS.
